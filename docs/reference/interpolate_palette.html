<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create an interpolation expression with automatic palette and break calculation — interpolate_palette • mapgl</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create an interpolation expression with automatic palette and break calculation — interpolate_palette"><meta name="description" content="This function creates an interpolation expression by automatically calculating
break points using different methods and applying a color palette. It handles
the values/stops matching automatically and supports the same classification
methods as the step functions."><meta property="og:description" content="This function creates an interpolation expression by automatically calculating
break points using different methods and applying a color palette. It handles
the values/stops matching automatically and supports the same classification
methods as the step functions."><meta property="og:image" content="https://walker-data.com/mapgl/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mapgl</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with mapgl</a></li>
    <li><a class="dropdown-item" href="../articles/layers-overview.html">An overview of layers in mapgl</a></li>
    <li><a class="dropdown-item" href="../articles/map-design.html">Fundamentals of map design with mapgl</a></li>
    <li><a class="dropdown-item" href="../articles/shiny.html">Using mapgl with Shiny</a></li>
    <li><a class="dropdown-item" href="../articles/story-maps.html">Building story maps with mapgl</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/walkerke/mapgl/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create an interpolation expression with automatic palette and break calculation</h1>
      <small class="dont-index">Source: <a href="https://github.com/walkerke/mapgl/blob/HEAD/R/style_helpers.R" class="external-link"><code>R/style_helpers.R</code></a></small>
      <div class="d-none name"><code>interpolate_palette.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates an interpolation expression by automatically calculating
break points using different methods and applying a color palette. It handles
the values/stops matching automatically and supports the same classification
methods as the step functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">interpolate_palette</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">column</span>,</span>
<span>  data_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"equal"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  palette <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  colors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na_color <span class="op">=</span> <span class="st">"grey"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or sf object containing the data. If provided, data_values
will be extracted from <code>data[[column]]</code>. Either data or data_values must be provided.</p></dd>


<dt id="arg-column">column<a class="anchor" aria-label="anchor" href="#arg-column"></a></dt>
<dd><p>The name of the column to use for the interpolation.</p></dd>


<dt id="arg-data-values">data_values<a class="anchor" aria-label="anchor" href="#arg-data-values"></a></dt>
<dd><p>A numeric vector of the actual data values used to calculate breaks.
If NULL and data is provided, will be extracted from <code>data[[column]]</code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The method for calculating breaks. Options are "equal" (equal intervals),
"quantile" (quantile breaks), or "jenks" (Jenks natural breaks). Defaults to "equal".</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The number of break points to create. Defaults to 5.</p></dd>


<dt id="arg-palette">palette<a class="anchor" aria-label="anchor" href="#arg-palette"></a></dt>
<dd><p>A function that takes n and returns a character vector of colors.
If NULL and colors is also NULL, defaults to <code><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridisLite::viridis</a></code>.</p></dd>


<dt id="arg-colors">colors<a class="anchor" aria-label="anchor" href="#arg-colors"></a></dt>
<dd><p>A character vector of colors to use. If provided, these colors
will be interpolated to match the number of breaks if needed. Either palette
or colors should be provided, but not both.</p></dd>


<dt id="arg-na-color">na_color<a class="anchor" aria-label="anchor" href="#arg-na-color"></a></dt>
<dd><p>The color to use for missing values. Defaults to "grey".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class "mapgl_continuous_scale" containing the interpolation expression and metadata.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create continuous color scale - using palette function</span></span></span>
<span class="r-in"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">45</span>, <span class="fl">60</span>, <span class="fl">75</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">scale1</span> <span class="op">&lt;-</span> <span class="fu">interpolate_palette</span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_data</span>, column <span class="op">=</span> <span class="st">"value"</span>,</span></span>
<span class="r-in"><span>                             method <span class="op">=</span> <span class="st">"equal"</span>, n <span class="op">=</span> <span class="fl">5</span>, palette <span class="op">=</span> <span class="fu">viridisLite</span><span class="fu">::</span><span class="va"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">plasma</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using specific colors (will interpolate to 5 if needed)</span></span></span>
<span class="r-in"><span><span class="va">scale2</span> <span class="op">&lt;-</span> <span class="fu">interpolate_palette</span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_data</span>, column <span class="op">=</span> <span class="st">"value"</span>,</span></span>
<span class="r-in"><span>                             method <span class="op">=</span> <span class="st">"equal"</span>, n <span class="op">=</span> <span class="fl">5</span>, colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"yellow"</span>, <span class="st">"blue"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or with piping</span></span></span>
<span class="r-in"><span><span class="va">scale3</span> <span class="op">&lt;-</span> <span class="va">my_data</span> <span class="op">|&gt;</span> <span class="fu">interpolate_palette</span><span class="op">(</span><span class="st">"value"</span>, method <span class="op">=</span> <span class="st">"equal"</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use in a layer</span></span></span>
<span class="r-in"><span><span class="fu"><a href="add_fill_layer.html">add_fill_layer</a></span><span class="op">(</span><span class="va">map</span>, fill_color <span class="op">=</span> <span class="va">scale1</span><span class="op">$</span><span class="va">expression</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract legend information</span></span></span>
<span class="r-in"><span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="classification_helpers.html">get_legend_labels</a></span><span class="op">(</span><span class="va">scale1</span>, format <span class="op">=</span> <span class="st">"currency"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="va">scale1</span><span class="op">$</span><span class="va">colors</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://walker-data.com" class="external-link">Kyle Walker</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

